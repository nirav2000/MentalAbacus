<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mental Abacus (Soroban) Trainer</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <h1>Mental Abacus (Soroban) Trainer</h1>
    <nav class="tabs" aria-label="Primary">
      <button class="tab-btn is-active" data-tab="trainer" accesskey="1">Trainer</button>
      <button class="tab-btn" data-tab="daily" accesskey="2">Daily</button>
      <button class="tab-btn" data-tab="abacus" accesskey="3">Abacus</button>
      <button class="tab-btn" data-tab="stats" accesskey="4">Stats</button>
    </nav>
  </header>

  <main>
    <section id="trainer" class="view is-active" aria-labelledby="Trainer">
      <div class="card">
        <h2>Trainer Modes</h2>
        <div class="mode-switch">
          <button data-mode="program" class="mode-btn is-active">Beginner Program</button>
          <button data-mode="step" class="mode-btn">Step Mode</button>
          <button data-mode="quiz" class="mode-btn">Quiz Mode</button>
          <button data-mode="flash" class="mode-btn">Flash/Cadence</button>
        </div>

        <div id="program-mode" class="mode-panel is-active">
          <p>Start from absolute basics and progress lesson-by-lesson toward mental abacus fluency.</p>
          <div class="program-grid">
            <div>
              <h3 id="program-title">Lesson 1</h3>
              <p id="program-description"></p>
              <ul id="program-checklist"></ul>
              <p class="muted" id="program-progress"></p>
            </div>
            <div>
              <div class="problem" id="program-problem">Press “Start Lesson”.</div>
              <form id="program-form" class="inline-form">
                <p class="muted">Set the answer on the abacus, then check.</p>
                <button type="submit">Check Abacus Value</button>
              </form>
              <div class="row-gap">
                <button type="button" id="program-start">Start Lesson</button>
                <button type="button" id="program-next-lesson">Next Lesson</button>
              </div>
              <div id="program-feedback" class="result"></div>
            </div>
          </div>
        </div>

        <div id="step-mode" class="mode-panel">
          <p>Break an operation into soroban-friendly actions (e.g. +7 → +5, +2).</p>
          <form id="step-form" class="inline-form">
            <label>
              Start
              <input type="number" id="step-start" value="0" min="0" max="999999" />
            </label>
            <label>
              Operation
              <select id="step-op">
                <option value="+">+</option>
                <option value="-">-</option>
              </select>
            </label>
            <label>
              Value
              <input type="number" id="step-value" value="7" min="0" max="999999" />
            </label>
            <button type="submit">Create Steps</button>
          </form>
          <div id="step-output" class="result"></div>
          <div class="row-gap">
            <button id="step-next" disabled>Apply Next Step</button>
            <button id="step-reset">Reset Step Session</button>
          </div>
        </div>

        <div id="quiz-mode" class="mode-panel">
          <p>Solve the generated sum on the abacus, then submit using the current abacus value.</p>
          <div id="quiz-problem" class="problem">Press “New Quiz” to begin.</div>
          <form id="quiz-form" class="inline-form">
            <button type="button" id="quiz-new">New Quiz</button>
            <button type="submit">Check Abacus Value</button>
          </form>
          <div id="quiz-feedback" class="result"></div>
        </div>

        <div id="flash-mode" class="mode-panel">
          <p>Watch the sequence, keep a running total, then submit at the end.</p>
          <form id="flash-form" class="inline-form">
            <label>
              Length
              <input id="flash-length" type="number" min="3" max="15" value="6" />
            </label>
            <label>
              Interval (ms)
              <input id="flash-interval" type="number" min="300" max="3000" value="900" />
            </label>
            <button type="button" id="flash-start">Start Flash</button>
          </form>
          <div id="flash-display" class="problem">Ready.</div>
          <form id="flash-answer-form" class="inline-form hidden">
            <button type="submit">Submit Abacus Total</button>
          </form>
          <div id="flash-feedback" class="result"></div>
        </div>
      </div>
    </section>

    <section id="daily" class="view" aria-labelledby="Daily">
      <div class="card">
        <h2>Today's Lesson</h2>
        <div id="daily-lesson"></div>
        <h3>Drills</h3>
        <ul id="daily-drills"></ul>
        <button id="daily-start">Start Drill</button>
        <div id="daily-problem" class="problem">Press “Start Drill” to begin.</div>
        <button id="daily-check" type="button" disabled>Check Abacus Value</button>
        <div id="daily-results" class="result"></div>
      </div>
    </section>

    <section id="abacus" class="view" aria-labelledby="Abacus">
      <div class="card">
        <h2>Interactive Soroban</h2>
        <div class="numeric-display">
          Current Value: <strong id="abacus-value">0</strong>
        </div>
        <div class="abacus-controls inline-form">
          <label>
            Set Number
            <input id="set-number-input" type="number" min="0" max="999999" value="0" />
          </label>
          <button id="set-number-btn" type="button">Set</button>
          <label>
            Apply Δ
            <input id="delta-input" type="number" value="1" />
          </label>
          <button id="apply-delta-btn" type="button">Apply Delta</button>
          <button id="clear-abacus-btn" type="button">Clear</button>
        </div>
        <div id="abacus-board" class="abacus-board" aria-label="Abacus board"></div>
      </div>
    </section>

    <section id="stats" class="view" aria-labelledby="Stats">
      <div class="card">
        <h2>Stats</h2>
        <div id="stats-overview"></div>
        <h3>Last 10 Sessions</h3>
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Type</th>
              <th>Score</th>
              <th>Accuracy</th>
              <th>Avg Time (s)</th>
            </tr>
          </thead>
          <tbody id="stats-history"></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>
    <small>Keyboard shortcuts: Alt+1/2/3/4 to switch tabs.</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
