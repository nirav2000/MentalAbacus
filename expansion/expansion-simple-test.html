<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Module Test</title>
  <style>
    body {
      font-family: monospace;
      padding: 20px;
      background: #1e1e1e;
      color: #f0f0f0;
    }
    .success { color: #4caf50; }
    .error { color: #f44336; }
    .info { color: #42a5f5; }
    pre {
      background: #2d2d2d;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <h1>Module Loading Test</h1>
  <div id="output"></div>

  <script type="module">
    const output = document.getElementById('output');

    function log(message, type = 'info') {
      const div = document.createElement('div');
      div.className = type;
      div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      output.appendChild(div);
    }

    async function testImport(path, name) {
      log(`Testing: ${name}`, 'info');
      try {
        const module = await import(path);
        log(`✓ SUCCESS: ${name}`, 'success');
        log(`  Exports: ${Object.keys(module).join(', ')}`, 'info');
        return true;
      } catch (e) {
        log(`✗ FAILED: ${name}`, 'error');
        log(`  Error: ${e.message}`, 'error');
        log(`  Name: ${e.name}`, 'error');
        if (e.stack) {
          log(`  Stack:\n${e.stack}`, 'error');
        }
        return false;
      }
    }

    // Test modules one by one
    (async () => {
      log('Starting module tests...', 'info');

      await testImport('./js/expansion-config.js', 'Config');
      await testImport('./js/expansion-utils.js', 'Utils');
      await testImport('./js/data/data-models.js', 'Data Models');
      await testImport('./js/data/expansion-storage.js', 'Storage');

      await testImport('./js/problems/problem-generator.js', 'Problem Generator');
      await testImport('./js/problems/difficulty-engine.js', 'Difficulty Engine');

      // Test word problem templates separately
      await testImport('./js/problems/word-problem-templates.js', 'Word Problem Templates');
      await testImport('./js/problems/word-problem-engine.js', 'Word Problem Engine');
      await testImport('./js/problems/word-problem-ui.js', 'Word Problem UI');

      await testImport('./js/methods/method-selector.js', 'Method Selector');
      await testImport('./js/methods/method-cards.js', 'Method Cards');
      await testImport('./js/methods/method-comparison.js', 'Method Comparison');

      await testImport('./js/expansion-app.js', 'Main App');

      log('\n=== All tests complete ===', 'info');
    })();
  </script>
</body>
</html>
