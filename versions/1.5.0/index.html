<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="theme-color" content="#4ecdc4">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon-192.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="icons/icon-192.svg">
    <title>Mental Maths</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/charts.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/intervention.css">
    <link rel="stylesheet" href="css/features.css">
</head>
<body>

    <!-- Welcome Screen -->
    <div id="screen-welcome" class="screen active">
        <div class="welcome-container">
            <h1 class="app-title">Mental Maths</h1>
            <p class="app-subtitle">Number Sense Training</p>
            <div class="player-select">
                <p class="label">Who's practising today?</p>
                <div id="player-list"></div>
                <div class="new-player">
                    <input type="text" id="new-player-name" placeholder="Add new name..." maxlength="20" autocomplete="off">
                    <button id="btn-add-player" class="btn btn-small">+</button>
                </div>
            </div>
            <button id="btn-teacher-dashboard" class="btn" style="margin-top:20px;">Teacher Dashboard</button>
        </div>
        <div class="version-tag version-link" id="version-welcome"></div>
    </div>

    <!-- Home / Strategy Select Screen -->
    <div id="screen-home" class="screen">
        <div class="home-header">
            <button id="btn-back-welcome" class="btn btn-icon">&larr;</button>
            <h2 id="player-greeting"></h2>
            <div style="display:flex;gap:4px;">
                <button id="btn-goals" class="btn btn-icon" title="Goals">&#x1f3af;</button>
                <button id="btn-settings" class="btn btn-icon" title="Settings">&#x2699;</button>
                <button id="btn-stats" class="btn btn-icon" title="Progress">&#x1f4ca;</button>
            </div>
        </div>
        <div class="home-content">
            <button id="btn-practice" class="btn btn-large btn-primary">Practice</button>
            <p class="home-hint">Auto-selects what you need to work on</p>
            <div id="home-content-area"></div>
            <div class="strategy-grid" id="strategy-grid"></div>
        </div>
        <div class="version-tag version-link" id="version-home"></div>
    </div>

    <!-- Quiz Screen -->
    <div id="screen-quiz" class="screen">
        <div class="quiz-header">
            <button id="btn-quit-quiz" class="btn btn-icon">&larr;</button>
            <div class="quiz-info">
                <span id="quiz-strategy-name"></span>
                <span id="quiz-progress"></span>
            </div>
            <div class="quiz-streak" id="quiz-streak">&#x1f525; 0</div>
        </div>

        <div class="quiz-body">
            <div id="practice-mode-banner" class="practice-mode-banner hidden">Practice Mode — No Timer</div>
            <div id="quiz-hint" class="quiz-hint hidden"></div>
            <div id="quiz-visual" class="quiz-visual hidden"></div>
            <div id="quiz-question" class="quiz-question"></div>
            <div id="quiz-input-area" class="quiz-input-area">
                <div id="quiz-answer-display" class="quiz-answer-display">&nbsp;</div>
            </div>
            <div class="quiz-feedback-row">
                <div id="quiz-avatar" class="quiz-avatar"></div>
                <div id="quiz-feedback" class="quiz-feedback hidden"></div>
            </div>
            <div id="quiz-encouragement" class="encouragement-msg"></div>
        </div>

        <div class="numpad" id="numpad">
            <button class="numpad-btn" data-val="1">1</button>
            <button class="numpad-btn" data-val="2">2</button>
            <button class="numpad-btn" data-val="3">3</button>
            <button class="numpad-btn" data-val="4">4</button>
            <button class="numpad-btn" data-val="5">5</button>
            <button class="numpad-btn" data-val="6">6</button>
            <button class="numpad-btn" data-val="7">7</button>
            <button class="numpad-btn" data-val="8">8</button>
            <button class="numpad-btn" data-val="9">9</button>
            <button class="numpad-btn numpad-del" data-val="del">&#x232b;</button>
            <button class="numpad-btn" data-val="0">0</button>
            <button class="numpad-btn numpad-go" data-val="go">&#x2713;</button>
        </div>
    </div>

    <!-- Summary Screen (after quiz session) -->
    <div id="screen-summary" class="screen">
        <div class="summary-container">
            <h2 id="summary-title">Session Complete</h2>
            <div id="summary-stats" class="summary-stats"></div>
            <div id="summary-detail" class="summary-detail"></div>
            <button id="btn-summary-home" class="btn btn-large btn-primary">Continue</button>
        </div>
    </div>

    <!-- Stats / Progress Screen -->
    <div id="screen-stats" class="screen">
        <div class="stats-header">
            <button id="btn-back-home" class="btn btn-icon">&larr;</button>
            <h2>Progress</h2>
            <button id="btn-export-data" class="btn btn-icon" title="Export data">&#x2b07;</button>
        </div>
        <div id="stats-content" class="stats-content"></div>
    </div>

    <!-- Settings Screen -->
    <div id="screen-settings" class="screen">
        <div class="settings-header">
            <button id="btn-back-from-settings" class="btn btn-icon">&larr;</button>
            <h2>Settings</h2>
            <div style="width:44px;"></div>
        </div>
        <div id="settings-content" class="settings-content"></div>
    </div>

    <!-- Goals Screen -->
    <div id="screen-goals" class="screen">
        <div class="settings-header">
            <button id="btn-back-from-goals" class="btn btn-icon">&larr;</button>
            <h2>Goals</h2>
            <div style="width:44px;"></div>
        </div>
        <div id="goals-content" class="settings-content"></div>
    </div>

    <!-- Teacher Dashboard Screen -->
    <div id="screen-teacher" class="screen">
        <div class="teacher-header">
            <button id="btn-back-from-teacher" class="btn btn-icon">&larr;</button>
            <h2>Teacher Dashboard</h2>
            <div style="width:44px;"></div>
        </div>
        <div id="teacher-content" class="teacher-content"></div>
    </div>

    <!-- Version History Screen -->
    <div id="screen-versions" class="screen">
        <div class="versions-header">
            <button id="btn-back-from-versions" class="btn btn-icon">&larr;</button>
            <h2>Version History</h2>
            <div style="width:44px;"></div>
        </div>
        <div id="versions-content" class="versions-content"></div>
    </div>

    <!-- Load order: config → data → utilities → features → engine → app (core → quiz → screens+boot) -->
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/generators.js"></script>
    <script src="js/visuals.js"></script>
    <script src="js/versions.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/spaced-repetition.js"></script>
    <script src="js/encouragement.js"></script>
    <script src="js/export-utils.js"></script>
    <script src="js/goals.js"></script>
    <script src="js/daily-challenge.js"></script>
    <script src="js/intervention.js"></script>
    <script src="js/teacher-dashboard.js"></script>
    <script src="js/stats-dashboard.js"></script>
    <script src="js/engine.js"></script>
    <script src="js/app-core.js"></script>
    <script src="js/app-quiz.js"></script>
    <script src="js/app-screens.js"></script>
</body>
</html>
